<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="content-security-policy" content=""><title>Trying out Svelte</title><meta property="og:site_name" content="jakzo" data-svelte="svelte-ex6n6g"><meta property="og:title" content="Trying out Svelte" data-svelte="svelte-1agr1j5"><meta property="og:type" content="article" data-svelte="svelte-1agr1j5"><meta property="og:description" content="I built a Wordle clone using Svelte for the first time and loved it. These are my initial thoughts on the framework." data-svelte="svelte-1agr1j5"><meta property="og:article:published_time" content="Tue Mar 15 2022 00:00:00 GMT+0000 (Coordinated Universal Time)" data-svelte="svelte-1agr1j5"><meta property="og:article:author" content="jakzo" data-svelte="svelte-1agr1j5"><meta property="og:article:tag" content="" data-svelte="svelte-1agr1j5">
	<link rel="stylesheet" href="/_app/immutable/assets/pages/__layout.svelte-80229877.css">
	<link rel="stylesheet" href="/_app/immutable/assets/pages/blog/_slug_.svelte-e10e81a6.css">
	<link rel="modulepreload" href="/_app/immutable/start-5f50cef0.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/index-00f972c8.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/paths-396f020f.js">
	<link rel="modulepreload" href="/_app/immutable/pages/__layout.svelte-f1a0198c.js">
	<link rel="modulepreload" href="/_app/immutable/pages/blog/_slug_.svelte-bd814028.js">
	<link rel="modulepreload" href="/_app/immutable/chunks/posts-ca509cce.js">
  </head>
  <body>
    <div class="background"></div>
    <div>




<nav class="svelte-s613fu"><a href="/" class="svelte-s613fu"><h3 class="svelte-s613fu"><span class="avatar svelte-s613fu"></span> Home</h3></a></nav>


<a href="https://github.com/jakzo/blog" class="github-corner svelte-9fn96p" aria-label="View source on GitHub"><svg width="60" height="60" viewBox="0 0 250 250" style="fill:#444; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm svelte-9fn96p"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg>
</a>


<div class="header svelte-6wpb0d"><h1 class="title svelte-6wpb0d">Trying out Svelte</h1>
  <p>March 15, 2022 by <a href="https://github.com/jakzo">jakzo</a></p></div>

<article><!-- HTML_TAG_START --><blockquote>
<p><strong>tl;dr</strong> I loved it enough to write a blog post about it. üòç It's like vanilla HTML/CSS/JS but everything's easier to do and structured better. Read the "<a href="#what_svelte_feels_like_to_me">what Svelte feels like to me</a>" section for a summary of everything I like about it.</p>
</blockquote>
<p>I made a <a href="https://jakzo.github.io/eternal-wordle/">Wordle clone</a> the other day (<a href="https://github.com/jakzo/eternal-wordle">code</a>). First a simple one in React, then I decided to try making another game mode, but also try out <a href="https://svelte.dev/">Svelte</a> at the same time to see what all the fuss was about. I had no idea this would happen before I started, but within the first hour of using it I became a huge fan. ü§©</p>
<h2 id="what-svelte-feels-like-to-me"><a href="#what-svelte-feels-like-to-me"></a>What Svelte feels like to me</h2>
<p>Overall I feel that Svelte is focused on being <strong>pragmatic</strong>. Every common task has a shortcut and there are multiple ways to do things (usually one approach is recommended but only loosely enforced). Coming from React, Svelte <strong>feels like a return to vanilla web development</strong>, with HTML, CSS and JS being used in equal parts as it was originally intended. However in Svelte <strong>all the things I hate about vanilla web dev have been fixed</strong>:</p>
<ul>
<li>HTML, CSS and JS are all colocated instead of in separate files</li>
<li>HTML/CSS/JS are encapsulated into components (eg. CSS rules you write in one component will not affect another component)</li>
<li>Tooling enforces proper HTML/CSS (eg. no unused CSS rules or typos in HTML attribute names)</li>
<li>All the common things you do in web dev have convenient shortcuts
<ul>
<li><code>&#x3C;input type="text" bind:value={myVar} /></code> keeps <code>myVar</code> updated with the text entered and setting the value of <code>myVar</code> in code will update the input text</li>
<li>Adding transition animations (CSS or JS) is as simple as <code>&#x3C;div out:fade /></code> where <code>fade</code> is an animation declared in JS and it will automatically handle starting the animation on removal and removing the element from the DOM when the animation finishes</li>
<li>Listen for events with <code>&#x3C;input on:click|preventDefault={e => { ... }} /></code> (other options like <code>|once</code> to only fire the event once, etc.)</li>
<li>Components (individual <code>.svelte</code> files in your project) are used like JSX (eg. <code>&#x3C;MyComponent prop={value}>...&#x3C;/MyComponent></code>)</li>
<li>Many more...</li>
</ul>
</li>
<li>HTML logic blocks (eg. <code>{#if showMessage} &#x3C;span>something&#x3C;/span> {/if}</code>, <code>{#each arr as item}</code>, etc.)</li>
</ul>
<p>Plus there's one major thing which is <em>not</em> like vanilla JS which I love:</p>
<ul>
<li>Svelte is <strong>reactive</strong> and when a variable is updated (eg. <code>myVar += 1</code>) it will rerender whatever has changed</li>
</ul>
<p>Those are a lot of good things, but my praise doesn't stop there:</p>
<ul>
<li>Usually I dread the period when I need to focus and learn a new framework, but the <a href="https://svelte.dev/tutorial">tutorial</a> was pleasant and so easy to follow along with that I got through it in under an hour and I felt like I knew what it was capable of and ready to build something. Perhaps that was just because I was building on my prior knowledge of vanilla web dev though. ü§∑‚Äç‚ôÇÔ∏è</li>
<li>Finally the thing I'd heard so much about: performance. The app I built was <strong>much faster</strong> than the React version, even though this was my first time using Svelte and not paying attention to performance at all (more on that later).</li>
</ul>
<h2 id="what-issues-i-had-with-it"><a href="#what-issues-i-had-with-it"></a>What issues I had with it</h2>
<p>There were a couple of gotcha's in Svelte:</p>
<h3 id="it-s-not-obvious-how-reactivity-works"><a href="#it-s-not-obvious-how-reactivity-works"></a>It's not obvious how reactivity works</h3>
<p>This presents problems in a few ways. The <strong>first</strong> and most minor is that <em>mutating</em> a variable does not trigger a reaction.</p>
<pre><code class="hljs language-svelte"><span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">script</span>></span></span><span class="javascript"> <span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];</span><span class="xml"> <span class="hljs-tag">&#x3C;/<span class="hljs-name">script</span>></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">ul</span>></span> </span><span class="javascript">{</span><span class="hljs-keyword">#each</span><span class="javascript"> arr <span class="hljs-keyword">as</span> n}</span><span class="xml"> <span class="hljs-tag">&#x3C;<span class="hljs-name">li</span>></span></span><span class="javascript">{n}</span><span class="xml"><span class="hljs-tag">&#x3C;/<span class="hljs-name">li</span>></span> <span class="hljs-tag">&#x3C;/<span class="hljs-name">ul</span>></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">on:click</span>=</span></span><span class="javascript">{<span class="hljs-function">() =></span> arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">0</span>)}</span><span class="xml"><span class="hljs-tag">></span>Add<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
</span><span class="hljs-comment">&#x3C;!-- WRONG: arr.push() will not trigger an update on the UI! --></span><span class="xml">
</span></code></pre>
<p>This could bite you but: it was called out in the tutorial, I never encountered a problem with this, and I think it's more of a quirk of how JS works rather than a problem with Svelte (variables are just <em>references</em>, they are not the actual data nested inside).</p>
<p>The <strong>second</strong> problem: things will only react if the <em>changed variable is in the AST</em>. This confused me when I was wondering why my UI wasn't updating. It turns out it was because I'd put my logic inside a function.</p>
<pre><code class="hljs language-svelte"><span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">script</span>></span></span><span class="javascript">
  <span class="hljs-keyword">let</span> n = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">getN</span> = (<span class="hljs-params"></span>) => n;</span><span class="xml">
<span class="hljs-tag">&#x3C;/<span class="hljs-name">script</span>></span>

<span class="hljs-tag">&#x3C;<span class="hljs-name">span</span>></span></span><span class="javascript">{<span class="hljs-title function_">getN</span>()}</span><span class="xml"><span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>
</span></code></pre>
<p>In this example, updating <code>n</code> will not update the <code>&#x3C;span></code> because Svelte doesn't know that the <code>&#x3C;span></code> depends on <code>n</code>. To fix this you would have to do <code>&#x3C;span>{n}&#x3C;/span></code> but for more complicated cases (eg. if you need to perform some logic) you need to pass whatever you want it to react to as arguments to your function, create a new component and variable which performs the logic in the script or do the logic inline.</p>
<p>Related to this, <strong>third</strong> is dealing with triggering procedural code when some condition occurs. For example, in Wordle I wanted to pop confetti when a word was guessed right. What variable(s) should I react to trigger this?</p>
<pre><code class="hljs language-js"><span class="hljs-attr">$</span>: <span class="hljs-keyword">if</span> (words) <span class="hljs-title function_">popConfetti</span>();
</code></pre>
<p>In that example <code>words</code> is always <code>true</code>, I'm just putting it in the reactive block so that <code>popConfetti()</code> is called whenever <code>words</code> changes (because the words are only updated when guessing one right). But what if I needed to pass some other variable to <code>popConfetti()</code>? That would suddenly make <code>popConfetti()</code> start getting called every time either <code>words</code> or this other variable is updated!</p>
<p>Regardless, this solution is ugly and I ended up finding something cleaner, but it wasn't obvious what I was meant to do in this situation and the framework didn't guide me to a particular solution. Should I restructure my components so that word guessing logic could call <code>popConfetti()</code>? Should I emit a custom event which will be caught by a <code>&#x3C;Confetti></code> component? ü§∑‚Äç‚ôÇÔ∏è</p>
<p><strong>Fourth</strong>, most things are reactive by default, except code in the script tag. For example, <code>&#x3C;span>{n}&#x3C;/span></code> will update the DOM every time <code>n</code> changes because it is reactive, but in the script below <code>x</code> will <em>not</em> update automatically when <code>n</code> changes:</p>
<pre><code class="hljs language-svelte"><span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">script</span>></span></span><span class="javascript">
  <span class="hljs-keyword">let</span> n = <span class="hljs-number">1</span>;

  <span class="hljs-keyword">let</span> x = n; <span class="hljs-comment">// will not update when n changes, only gets set to the initial value of n</span>

  <span class="hljs-keyword">let</span> y;
</span><span class="hljs-keyword">  $: </span><span class="javascript">y = n; <span class="hljs-comment">// do this if you want to update every time n changes</span></span><span class="xml">
<span class="hljs-tag">&#x3C;/<span class="hljs-name">script</span>></span>
</span></code></pre>
<p>I don't know if that was explicit in the tutorial but I must have missed it.</p>
<p>Finally the <strong>fifth</strong> problem I encountered was an infinite loop where an update triggered a reaction which updated the variable again. Svelte can handle most of these cases but apparently not all because I got bit by it. I can't remember or reproduce it anymore but I swear it happened. ü•≤</p>
<h3 id="non-standard-js-behaviour"><a href="#non-standard-js-behaviour"></a>Non-standard JS behaviour</h3>
<p>Svelte reuses JS syntax but gives them new semantics which seems odd at first but I don't think this is a big issue because you get used to it.</p>
<p>For example, props are declared by <code>export</code>ing variables. The way I think of this conceptually is that exporting a variable makes it available outside of this file to be both written to (as a prop) and read from (with binding).</p>
<p>Reactive statements using the <code>$:</code> label are just magic. üôÉ But doesn't take long to get used to them.</p>
<h3 id="other-missing-bits"><a href="#other-missing-bits"></a>Other missing bits</h3>
<p>Animations are easy with Svelte, but I found a case which wasn't: transitioning when replacing an element with another. Turns out this is an <a href="https://github.com/sveltejs/svelte/issues/544">open issue</a> and I had to hack around it by making the element being removed become <code>position: absolute</code> during the exit animation so that the elements don't appear side-by-side for a brief moment before going back to how it was before. Thankfully Svelte made this pretty easy and I could house this logic <a href="https://github.com/jakzo/eternal-wordle/blob/e6c46c016c98665b8f53a09af17be8b14874b02d/src/transitions.ts#L27-L32">fully inside my transition function</a> rather than polluting the business logic.</p>
<h3 id="lack-of-structure"><a href="#lack-of-structure"></a>Lack of structure</h3>
<p>Perhaps Svelte lets you do too much. I found it easy to keep adding more and more into a component until it was the size of a full app and filled with spaghetti code. In something like React this doesn't happen because it gets cumbersome to manage an entire app in a single component and performance will be terrible.</p>
<p>I don't know if this is a <em>problem</em> with Svelte per-se, since it is definitely easy to structure things nicely, it's just also easy to structure things badly because it lets you do almost whatever you want. I imagine with more experience I'd break components down in the way that makes sense for Svelte apps more proactively.</p>
<h2 id="comparison-to-react"><a href="#comparison-to-react"></a>Comparison to React</h2>
<p>React takes a more restrictive approach than Svelte. For example, React provides ways for components to easily influence their children (you return whatever you want as children from the render function) but not their parents. To alter parents you need to build out scaffolding like accepting an <code>onChange</code> prop where the parent provides a function which the child will call to pass it a value. In contrast, Svelte provides an easy one-line solution to just about any task. Here are some examples of identical programs in both Svelte and React:</p>
<h3 id="pass-data-to-parent"><a href="#pass-data-to-parent"></a>Pass data to parent</h3>
<p><code>Child.svelte</code>: <a href="https://svelte.dev/repl/841fbc88f263447f900de441a046571d?version=3.46.4">Svelte playground</a></p>
<pre><code class="hljs language-svelte"><span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">script</span>></span></span><span class="javascript">
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> n = <span class="hljs-number">1</span>;
  <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =></span> n++, <span class="hljs-number">1000</span>);</span><span class="xml">
<span class="hljs-tag">&#x3C;/<span class="hljs-name">script</span>></span>

<span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>Child = </span><span class="javascript">{n}</span><span class="xml"><span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
</span></code></pre>
<p><code>Parent.svelte</code>:</p>
<pre><code class="hljs language-svelte"><span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">script</span>></span></span><span class="javascript">
  <span class="hljs-keyword">import</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Child.svelte"</span>;
  <span class="hljs-keyword">let</span> n;</span><span class="xml">
<span class="hljs-tag">&#x3C;/<span class="hljs-name">script</span>></span>

<span class="hljs-tag">&#x3C;<span class="hljs-name">Child</span> <span class="hljs-attr">bind:n</span> /></span>

<span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>Parent = </span><span class="javascript">{n}</span><span class="xml"><span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
</span></code></pre>
<p>For Svelte, the magic happens in the <code>bind:n</code> which automatically syncs <code>Parent.svelte</code>'s <code>n</code> to the value of <code>Child.svelte</code>'s exported <code>n</code>. Note also that this binding is two-way, meaning the parent can update <code>n</code> which will also change <code>n</code> in the child.</p>
<p><code>Child.jsx</code>: <a href="https://codesandbox.io/s/pass-data-to-parent-eqyush?file=/src/Parent.jsx">CodeSandbox</a></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">Child</span> = (<span class="hljs-params">{ onChange }</span>) => {
  <span class="hljs-keyword">const</span> [n, setN] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =></span> <span class="hljs-title function_">setN</span>(<span class="hljs-function">(<span class="hljs-params">n</span>) =></span> n + <span class="hljs-number">1</span>), <span class="hljs-number">1000</span>);
  }, []);
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
    <span class="hljs-title function_">onChange</span>(n);
  }, [onChange, n]);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>Child = {n}<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>;
};
</code></pre>
<p><code>Parent.jsx</code>:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Child</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./Child"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">Parent</span> = (<span class="hljs-params"></span>) => {
  <span class="hljs-keyword">const</span> [n, setN] = <span class="hljs-title function_">useState</span>();
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">Child</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{setN}</span> /></span>

      <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>Parent = {n}<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
    <span class="hljs-tag">&#x3C;/></span></span>
  );
};
</code></pre>
<p>You can see that it's a lot more effort to do the same thing in React. It's more verbose and less intuitive (dealing with the useState and useEffect hooks while also having to pay attention to not accidentally use a stale reference of <code>n</code> like <code>setN(n + 1)</code>, and it would be much more verbose if types were involved), while Svelte is all just vanilla JS/HTML except for the <code>bind</code>.</p>
<h3 id="animations"><a href="#animations"></a>Animations</h3>
<p>Animating a DOM node when it is removed was important for my Wordle clone, but this is <em>extremely</em> tedious in React. Svelte has many built-in animations but I'll create a custom animation to even the playing field for React which does not have them built-in. The code below fades some text in and out each second, removing the elements from the DOM after they've faded out.</p>
<p><code>Animations.svelte</code>: <a href="https://svelte.dev/repl/9fc72cc1eba04eb192df4f65c6a9f0a7?version=3.46.4">Svelte playground</a></p>
<pre><code class="hljs language-svelte"><span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">script</span>></span></span><span class="javascript">
  <span class="hljs-keyword">let</span> show = <span class="hljs-literal">true</span>;
  <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =></span> (show = !show), <span class="hljs-number">1000</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fade</span> = (<span class="hljs-params"></span>) => ({ <span class="hljs-attr">duration</span>: <span class="hljs-number">500</span>, <span class="hljs-attr">css</span>: <span class="hljs-function">(<span class="hljs-params">t</span>) =></span> <span class="hljs-string">`opacity: <span class="hljs-subst">${t}</span>;`</span> });</span><span class="xml">
<span class="hljs-tag">&#x3C;/<span class="hljs-name">script</span>></span>

</span><span class="javascript">{</span><span class="hljs-keyword">#if</span><span class="javascript"> show}</span><span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">transition:fade</span>></span>Hello, world!<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span></span><span class="javascript">{</span><span class="hljs-keyword">/if</span><span class="javascript">}</span><span class="xml">
</span></code></pre>
<p><code>Animations.jsx</code>: <a href="https://codesandbox.io/s/animations-18srn2?file=/src/Animations.jsx">CodeSandbox</a></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useCallback, useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">Animations</span> = (<span class="hljs-params"></span>) => {
  <span class="hljs-keyword">const</span> [show, setShow] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =></span> <span class="hljs-title function_">setShow</span>(<span class="hljs-function">(<span class="hljs-params">show</span>) =></span> !show), <span class="hljs-number">1000</span>);
  }, []);
  <span class="hljs-keyword">const</span> [isAttached, setAttached] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">const</span> [isFadeInStarted, setFadeInStarted] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
    <span class="hljs-keyword">if</span> (show) {
      <span class="hljs-title function_">setAttached</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-title function_">setImmediate</span>(<span class="hljs-function">() =></span> <span class="hljs-title function_">setFadeInStarted</span>(<span class="hljs-literal">true</span>));
    }
  }, [show, isFadeInStarted]);
  <span class="hljs-keyword">const</span> onTransitionEnd = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =></span> {
    <span class="hljs-keyword">if</span> (!show) {
      <span class="hljs-title function_">setAttached</span>(<span class="hljs-literal">false</span>);
      <span class="hljs-title function_">setFadeInStarted</span>(<span class="hljs-literal">false</span>);
    }
  }, [show]);
  <span class="hljs-keyword">return</span> isAttached ? (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">span</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">transition:</span> "<span class="hljs-attr">opacity</span> <span class="hljs-attr">linear</span> <span class="hljs-attr">500ms</span>",
        <span class="hljs-attr">opacity:</span> <span class="hljs-attr">show</span> &#x26;&#x26; <span class="hljs-attr">isFadeInStarted</span> ? <span class="hljs-attr">1</span> <span class="hljs-attr">:</span> <span class="hljs-attr">0</span>,
      }}
      <span class="hljs-attr">onTransitionEnd</span>=<span class="hljs-string">{onTransitionEnd}</span>
    ></span>
      Hello, world!
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span></span>
  ) : <span class="hljs-literal">null</span>;
};
</code></pre>
<p>Handling these sorts of transitions is honestly a nightmare in React. Instead of simply not rendering a child anymore like you'd normally do, you need to set up this monstrosity to transition in/out and only stop rendering the child once its animation has finished. No library can abstract this away fully either, because no matter what you do, removing the child from the virtual DOM will instantly remove it from the real DOM and cut off its transition.</p>
<h3 id="performance"><a href="#performance"></a>Performance</h3>
<p>There's another benefit of Svelte shown in the example above as well. Notice how I used <code>useCallback()</code> in the React example? That's not strictly necessary ‚Äì the program will work without it ‚Äì but it helps performance. Another thing I'd do if this were production code is extract the styles into global constants to avoid creating an object every time it renders, but these arcane tricks are not required in Svelte. Declaring callbacks inline inside props is perfectly fine and will only produce a single function during runtime, rather than creating a new one on every render like React.</p>
<h2 id="wordle"><a href="#wordle"></a>Wordle</h2>
<p>Those React-Svelte comparisons above came directly from my Wordle project.</p>
<p>For passing data to a parent, I had an <code>&#x3C;App></code> component which rendered the menu/status bar UI for choosing game options which would be passed as props to the <code>&#x3C;Game></code> component. However the <code>&#x3C;Game></code> handled the score, but I wanted it displayed in the status bar, which meant I needed to send it up from <code>&#x3C;Game></code> to the <code>&#x3C;App></code>.</p>
<p>For transitions, I really wanted the game to <em>feel</em> good to play and be satisfying to guess a word right. That meant I needed a fancy transition for when a word disappeared from the screen. I actually never ended up implementing this in the React version because of what a hassle I knew it would be, and this is what prompted me to try out Svelte instead! Boy am I glad I did.</p>
<p>Finally for performance I did things the "right" way in React using <code>useCallback()</code> and such, but when I submitted guesses with hundreds of Wordle games on the screen at once it would noticeably freeze for about half a second. There's probably ways to optimise it further but none were immediately obvious to me. However when building the same thing in Svelte, the game shows no lag for the same case. And remember before this started I had a lot of experience in React but <strong>zero</strong> in Svelte, so that's really saying something about how easy it is to build performant apps in Svelte.</p>
<p>Right now the game is near-finished with polish like animations, autosaves, seeded games to play with friends, etc. but even with this complexity it was still only ~800 lines of code, which says something about how little code you need to write to do things. I reckon the same thing in React would easily be 2k lines or more.</p>
<h2 id="conclusion"><a href="#conclusion"></a>Conclusion</h2>
<p>I don't know if you can tell by now but I love Svelte. üòú After using it once it felt so good that I decided to write a blog post about how great it is, and I don't do this for every technology I try! I'm used to hacking things together in vanilla JS (occasionally I challenge myself to build a simple arcade game in an hour using vanilla JS). Using Svelte felt like this where everything was vanilla web dev and I was free to do things however I wanted, but with much more convenience. It opened my eyes to how much dread I felt in React realising I'd need to make a callback prop to use data outside a component or set up animation logic. But in Svelte I know these things can be as easy as a single line of code. üòå As far as I can tell, there are no major negative tradeoffs to using Svelte (other than a smaller community than React) so I think I'll be using it in a lot more personal projects in the future.</p><!-- HTML_TAG_END --></article>

<div></div>


		<script type="module" data-sveltekit-hydrate="1qhssoe">
		import { start } from "/_app/immutable/start-5f50cef0.js";
		start({
			target: document.querySelector('[data-sveltekit-hydrate="1qhssoe"]').parentNode,
			paths: {"base":"","assets":""},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "never",
			hydrate: null
		});
	</script><script type="application/json" sveltekit:data-type="props">{"post":{"metadata":{"title":"Trying out Svelte","date":"2022-03-15T00:00:00.000Z","excerpt":"I built a Wordle clone using Svelte for the first time and loved it. These are my initial thoughts on the framework."},"content":"\u003Cblockquote>\n\u003Cp>\u003Cstrong>tl;dr\u003C/strong> I loved it enough to write a blog post about it. üòç It's like vanilla HTML/CSS/JS but everything's easier to do and structured better. Read the \"\u003Ca href=\"#what_svelte_feels_like_to_me\">what Svelte feels like to me\u003C/a>\" section for a summary of everything I like about it.\u003C/p>\n\u003C/blockquote>\n\u003Cp>I made a \u003Ca href=\"https://jakzo.github.io/eternal-wordle/\">Wordle clone\u003C/a> the other day (\u003Ca href=\"https://github.com/jakzo/eternal-wordle\">code\u003C/a>). First a simple one in React, then I decided to try making another game mode, but also try out \u003Ca href=\"https://svelte.dev/\">Svelte\u003C/a> at the same time to see what all the fuss was about. I had no idea this would happen before I started, but within the first hour of using it I became a huge fan. ü§©\u003C/p>\n\u003Ch2 id=\"what-svelte-feels-like-to-me\">\u003Ca href=\"#what-svelte-feels-like-to-me\">\u003C/a>What Svelte feels like to me\u003C/h2>\n\u003Cp>Overall I feel that Svelte is focused on being \u003Cstrong>pragmatic\u003C/strong>. Every common task has a shortcut and there are multiple ways to do things (usually one approach is recommended but only loosely enforced). Coming from React, Svelte \u003Cstrong>feels like a return to vanilla web development\u003C/strong>, with HTML, CSS and JS being used in equal parts as it was originally intended. However in Svelte \u003Cstrong>all the things I hate about vanilla web dev have been fixed\u003C/strong>:\u003C/p>\n\u003Cul>\n\u003Cli>HTML, CSS and JS are all colocated instead of in separate files\u003C/li>\n\u003Cli>HTML/CSS/JS are encapsulated into components (eg. CSS rules you write in one component will not affect another component)\u003C/li>\n\u003Cli>Tooling enforces proper HTML/CSS (eg. no unused CSS rules or typos in HTML attribute names)\u003C/li>\n\u003Cli>All the common things you do in web dev have convenient shortcuts\n\u003Cul>\n\u003Cli>\u003Ccode>&#x3C;input type=\"text\" bind:value={myVar} />\u003C/code> keeps \u003Ccode>myVar\u003C/code> updated with the text entered and setting the value of \u003Ccode>myVar\u003C/code> in code will update the input text\u003C/li>\n\u003Cli>Adding transition animations (CSS or JS) is as simple as \u003Ccode>&#x3C;div out:fade />\u003C/code> where \u003Ccode>fade\u003C/code> is an animation declared in JS and it will automatically handle starting the animation on removal and removing the element from the DOM when the animation finishes\u003C/li>\n\u003Cli>Listen for events with \u003Ccode>&#x3C;input on:click|preventDefault={e => { ... }} />\u003C/code> (other options like \u003Ccode>|once\u003C/code> to only fire the event once, etc.)\u003C/li>\n\u003Cli>Components (individual \u003Ccode>.svelte\u003C/code> files in your project) are used like JSX (eg. \u003Ccode>&#x3C;MyComponent prop={value}>...&#x3C;/MyComponent>\u003C/code>)\u003C/li>\n\u003Cli>Many more...\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>HTML logic blocks (eg. \u003Ccode>{#if showMessage} &#x3C;span>something&#x3C;/span> {/if}\u003C/code>, \u003Ccode>{#each arr as item}\u003C/code>, etc.)\u003C/li>\n\u003C/ul>\n\u003Cp>Plus there's one major thing which is \u003Cem>not\u003C/em> like vanilla JS which I love:\u003C/p>\n\u003Cul>\n\u003Cli>Svelte is \u003Cstrong>reactive\u003C/strong> and when a variable is updated (eg. \u003Ccode>myVar += 1\u003C/code>) it will rerender whatever has changed\u003C/li>\n\u003C/ul>\n\u003Cp>Those are a lot of good things, but my praise doesn't stop there:\u003C/p>\n\u003Cul>\n\u003Cli>Usually I dread the period when I need to focus and learn a new framework, but the \u003Ca href=\"https://svelte.dev/tutorial\">tutorial\u003C/a> was pleasant and so easy to follow along with that I got through it in under an hour and I felt like I knew what it was capable of and ready to build something. Perhaps that was just because I was building on my prior knowledge of vanilla web dev though. ü§∑‚Äç‚ôÇÔ∏è\u003C/li>\n\u003Cli>Finally the thing I'd heard so much about: performance. The app I built was \u003Cstrong>much faster\u003C/strong> than the React version, even though this was my first time using Svelte and not paying attention to performance at all (more on that later).\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"what-issues-i-had-with-it\">\u003Ca href=\"#what-issues-i-had-with-it\">\u003C/a>What issues I had with it\u003C/h2>\n\u003Cp>There were a couple of gotcha's in Svelte:\u003C/p>\n\u003Ch3 id=\"it-s-not-obvious-how-reactivity-works\">\u003Ca href=\"#it-s-not-obvious-how-reactivity-works\">\u003C/a>It's not obvious how reactivity works\u003C/h3>\n\u003Cp>This presents problems in a few ways. The \u003Cstrong>first\u003C/strong> and most minor is that \u003Cem>mutating\u003C/em> a variable does not trigger a reaction.\u003C/p>\n\u003Cpre>\u003Ccode class=\"hljs language-svelte\">\u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">script\u003C/span>>\u003C/span>\u003C/span>\u003Cspan class=\"javascript\"> \u003Cspan class=\"hljs-keyword\">let\u003C/span> arr = [\u003Cspan class=\"hljs-number\">1\u003C/span>, \u003Cspan class=\"hljs-number\">2\u003C/span>, \u003Cspan class=\"hljs-number\">3\u003C/span>];\u003C/span>\u003Cspan class=\"xml\"> \u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">script\u003C/span>>\u003C/span>\n\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">ul\u003C/span>>\u003C/span> \u003C/span>\u003Cspan class=\"javascript\">{\u003C/span>\u003Cspan class=\"hljs-keyword\">#each\u003C/span>\u003Cspan class=\"javascript\"> arr \u003Cspan class=\"hljs-keyword\">as\u003C/span> n}\u003C/span>\u003Cspan class=\"xml\"> \u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">li\u003C/span>>\u003C/span>\u003C/span>\u003Cspan class=\"javascript\">{n}\u003C/span>\u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">li\u003C/span>>\u003C/span> \u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">ul\u003C/span>>\u003C/span>\n\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">button\u003C/span> \u003Cspan class=\"hljs-attr\">on:click\u003C/span>=\u003C/span>\u003C/span>\u003Cspan class=\"javascript\">{\u003Cspan class=\"hljs-function\">() =>\u003C/span> arr.\u003Cspan class=\"hljs-title function_\">push\u003C/span>(\u003Cspan class=\"hljs-number\">0\u003C/span>)}\u003C/span>\u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">>\u003C/span>Add\u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">button\u003C/span>>\u003C/span>\n\u003C/span>\u003Cspan class=\"hljs-comment\">&#x3C;!-- WRONG: arr.push() will not trigger an update on the UI! -->\u003C/span>\u003Cspan class=\"xml\">\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>This could bite you but: it was called out in the tutorial, I never encountered a problem with this, and I think it's more of a quirk of how JS works rather than a problem with Svelte (variables are just \u003Cem>references\u003C/em>, they are not the actual data nested inside).\u003C/p>\n\u003Cp>The \u003Cstrong>second\u003C/strong> problem: things will only react if the \u003Cem>changed variable is in the AST\u003C/em>. This confused me when I was wondering why my UI wasn't updating. It turns out it was because I'd put my logic inside a function.\u003C/p>\n\u003Cpre>\u003Ccode class=\"hljs language-svelte\">\u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">script\u003C/span>>\u003C/span>\u003C/span>\u003Cspan class=\"javascript\">\n  \u003Cspan class=\"hljs-keyword\">let\u003C/span> n = \u003Cspan class=\"hljs-number\">1\u003C/span>;\n  \u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title function_\">getN\u003C/span> = (\u003Cspan class=\"hljs-params\">\u003C/span>) => n;\u003C/span>\u003Cspan class=\"xml\">\n\u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">script\u003C/span>>\u003C/span>\n\n\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">span\u003C/span>>\u003C/span>\u003C/span>\u003Cspan class=\"javascript\">{\u003Cspan class=\"hljs-title function_\">getN\u003C/span>()}\u003C/span>\u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">span\u003C/span>>\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>In this example, updating \u003Ccode>n\u003C/code> will not update the \u003Ccode>&#x3C;span>\u003C/code> because Svelte doesn't know that the \u003Ccode>&#x3C;span>\u003C/code> depends on \u003Ccode>n\u003C/code>. To fix this you would have to do \u003Ccode>&#x3C;span>{n}&#x3C;/span>\u003C/code> but for more complicated cases (eg. if you need to perform some logic) you need to pass whatever you want it to react to as arguments to your function, create a new component and variable which performs the logic in the script or do the logic inline.\u003C/p>\n\u003Cp>Related to this, \u003Cstrong>third\u003C/strong> is dealing with triggering procedural code when some condition occurs. For example, in Wordle I wanted to pop confetti when a word was guessed right. What variable(s) should I react to trigger this?\u003C/p>\n\u003Cpre>\u003Ccode class=\"hljs language-js\">\u003Cspan class=\"hljs-attr\">$\u003C/span>: \u003Cspan class=\"hljs-keyword\">if\u003C/span> (words) \u003Cspan class=\"hljs-title function_\">popConfetti\u003C/span>();\n\u003C/code>\u003C/pre>\n\u003Cp>In that example \u003Ccode>words\u003C/code> is always \u003Ccode>true\u003C/code>, I'm just putting it in the reactive block so that \u003Ccode>popConfetti()\u003C/code> is called whenever \u003Ccode>words\u003C/code> changes (because the words are only updated when guessing one right). But what if I needed to pass some other variable to \u003Ccode>popConfetti()\u003C/code>? That would suddenly make \u003Ccode>popConfetti()\u003C/code> start getting called every time either \u003Ccode>words\u003C/code> or this other variable is updated!\u003C/p>\n\u003Cp>Regardless, this solution is ugly and I ended up finding something cleaner, but it wasn't obvious what I was meant to do in this situation and the framework didn't guide me to a particular solution. Should I restructure my components so that word guessing logic could call \u003Ccode>popConfetti()\u003C/code>? Should I emit a custom event which will be caught by a \u003Ccode>&#x3C;Confetti>\u003C/code> component? ü§∑‚Äç‚ôÇÔ∏è\u003C/p>\n\u003Cp>\u003Cstrong>Fourth\u003C/strong>, most things are reactive by default, except code in the script tag. For example, \u003Ccode>&#x3C;span>{n}&#x3C;/span>\u003C/code> will update the DOM every time \u003Ccode>n\u003C/code> changes because it is reactive, but in the script below \u003Ccode>x\u003C/code> will \u003Cem>not\u003C/em> update automatically when \u003Ccode>n\u003C/code> changes:\u003C/p>\n\u003Cpre>\u003Ccode class=\"hljs language-svelte\">\u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">script\u003C/span>>\u003C/span>\u003C/span>\u003Cspan class=\"javascript\">\n  \u003Cspan class=\"hljs-keyword\">let\u003C/span> n = \u003Cspan class=\"hljs-number\">1\u003C/span>;\n\n  \u003Cspan class=\"hljs-keyword\">let\u003C/span> x = n; \u003Cspan class=\"hljs-comment\">// will not update when n changes, only gets set to the initial value of n\u003C/span>\n\n  \u003Cspan class=\"hljs-keyword\">let\u003C/span> y;\n\u003C/span>\u003Cspan class=\"hljs-keyword\">  $: \u003C/span>\u003Cspan class=\"javascript\">y = n; \u003Cspan class=\"hljs-comment\">// do this if you want to update every time n changes\u003C/span>\u003C/span>\u003Cspan class=\"xml\">\n\u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">script\u003C/span>>\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>I don't know if that was explicit in the tutorial but I must have missed it.\u003C/p>\n\u003Cp>Finally the \u003Cstrong>fifth\u003C/strong> problem I encountered was an infinite loop where an update triggered a reaction which updated the variable again. Svelte can handle most of these cases but apparently not all because I got bit by it. I can't remember or reproduce it anymore but I swear it happened. ü•≤\u003C/p>\n\u003Ch3 id=\"non-standard-js-behaviour\">\u003Ca href=\"#non-standard-js-behaviour\">\u003C/a>Non-standard JS behaviour\u003C/h3>\n\u003Cp>Svelte reuses JS syntax but gives them new semantics which seems odd at first but I don't think this is a big issue because you get used to it.\u003C/p>\n\u003Cp>For example, props are declared by \u003Ccode>export\u003C/code>ing variables. The way I think of this conceptually is that exporting a variable makes it available outside of this file to be both written to (as a prop) and read from (with binding).\u003C/p>\n\u003Cp>Reactive statements using the \u003Ccode>$:\u003C/code> label are just magic. üôÉ But doesn't take long to get used to them.\u003C/p>\n\u003Ch3 id=\"other-missing-bits\">\u003Ca href=\"#other-missing-bits\">\u003C/a>Other missing bits\u003C/h3>\n\u003Cp>Animations are easy with Svelte, but I found a case which wasn't: transitioning when replacing an element with another. Turns out this is an \u003Ca href=\"https://github.com/sveltejs/svelte/issues/544\">open issue\u003C/a> and I had to hack around it by making the element being removed become \u003Ccode>position: absolute\u003C/code> during the exit animation so that the elements don't appear side-by-side for a brief moment before going back to how it was before. Thankfully Svelte made this pretty easy and I could house this logic \u003Ca href=\"https://github.com/jakzo/eternal-wordle/blob/e6c46c016c98665b8f53a09af17be8b14874b02d/src/transitions.ts#L27-L32\">fully inside my transition function\u003C/a> rather than polluting the business logic.\u003C/p>\n\u003Ch3 id=\"lack-of-structure\">\u003Ca href=\"#lack-of-structure\">\u003C/a>Lack of structure\u003C/h3>\n\u003Cp>Perhaps Svelte lets you do too much. I found it easy to keep adding more and more into a component until it was the size of a full app and filled with spaghetti code. In something like React this doesn't happen because it gets cumbersome to manage an entire app in a single component and performance will be terrible.\u003C/p>\n\u003Cp>I don't know if this is a \u003Cem>problem\u003C/em> with Svelte per-se, since it is definitely easy to structure things nicely, it's just also easy to structure things badly because it lets you do almost whatever you want. I imagine with more experience I'd break components down in the way that makes sense for Svelte apps more proactively.\u003C/p>\n\u003Ch2 id=\"comparison-to-react\">\u003Ca href=\"#comparison-to-react\">\u003C/a>Comparison to React\u003C/h2>\n\u003Cp>React takes a more restrictive approach than Svelte. For example, React provides ways for components to easily influence their children (you return whatever you want as children from the render function) but not their parents. To alter parents you need to build out scaffolding like accepting an \u003Ccode>onChange\u003C/code> prop where the parent provides a function which the child will call to pass it a value. In contrast, Svelte provides an easy one-line solution to just about any task. Here are some examples of identical programs in both Svelte and React:\u003C/p>\n\u003Ch3 id=\"pass-data-to-parent\">\u003Ca href=\"#pass-data-to-parent\">\u003C/a>Pass data to parent\u003C/h3>\n\u003Cp>\u003Ccode>Child.svelte\u003C/code>: \u003Ca href=\"https://svelte.dev/repl/841fbc88f263447f900de441a046571d?version=3.46.4\">Svelte playground\u003C/a>\u003C/p>\n\u003Cpre>\u003Ccode class=\"hljs language-svelte\">\u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">script\u003C/span>>\u003C/span>\u003C/span>\u003Cspan class=\"javascript\">\n  \u003Cspan class=\"hljs-keyword\">export\u003C/span> \u003Cspan class=\"hljs-keyword\">let\u003C/span> n = \u003Cspan class=\"hljs-number\">1\u003C/span>;\n  \u003Cspan class=\"hljs-built_in\">setInterval\u003C/span>(\u003Cspan class=\"hljs-function\">() =>\u003C/span> n++, \u003Cspan class=\"hljs-number\">1000\u003C/span>);\u003C/span>\u003Cspan class=\"xml\">\n\u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">script\u003C/span>>\u003C/span>\n\n\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">div\u003C/span>>\u003C/span>Child = \u003C/span>\u003Cspan class=\"javascript\">{n}\u003C/span>\u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">div\u003C/span>>\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Ccode>Parent.svelte\u003C/code>:\u003C/p>\n\u003Cpre>\u003Ccode class=\"hljs language-svelte\">\u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">script\u003C/span>>\u003C/span>\u003C/span>\u003Cspan class=\"javascript\">\n  \u003Cspan class=\"hljs-keyword\">import\u003C/span> \u003Cspan class=\"hljs-title class_\">Child\u003C/span> \u003Cspan class=\"hljs-keyword\">from\u003C/span> \u003Cspan class=\"hljs-string\">\"./Child.svelte\"\u003C/span>;\n  \u003Cspan class=\"hljs-keyword\">let\u003C/span> n;\u003C/span>\u003Cspan class=\"xml\">\n\u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">script\u003C/span>>\u003C/span>\n\n\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">Child\u003C/span> \u003Cspan class=\"hljs-attr\">bind:n\u003C/span> />\u003C/span>\n\n\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">div\u003C/span>>\u003C/span>Parent = \u003C/span>\u003Cspan class=\"javascript\">{n}\u003C/span>\u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">div\u003C/span>>\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>For Svelte, the magic happens in the \u003Ccode>bind:n\u003C/code> which automatically syncs \u003Ccode>Parent.svelte\u003C/code>'s \u003Ccode>n\u003C/code> to the value of \u003Ccode>Child.svelte\u003C/code>'s exported \u003Ccode>n\u003C/code>. Note also that this binding is two-way, meaning the parent can update \u003Ccode>n\u003C/code> which will also change \u003Ccode>n\u003C/code> in the child.\u003C/p>\n\u003Cp>\u003Ccode>Child.jsx\u003C/code>: \u003Ca href=\"https://codesandbox.io/s/pass-data-to-parent-eqyush?file=/src/Parent.jsx\">CodeSandbox\u003C/a>\u003C/p>\n\u003Cpre>\u003Ccode class=\"hljs language-js\">\u003Cspan class=\"hljs-keyword\">import\u003C/span> \u003Cspan class=\"hljs-title class_\">React\u003C/span>, { useState, useEffect } \u003Cspan class=\"hljs-keyword\">from\u003C/span> \u003Cspan class=\"hljs-string\">\"react\"\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">export\u003C/span> \u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title function_\">Child\u003C/span> = (\u003Cspan class=\"hljs-params\">{ onChange }\u003C/span>) => {\n  \u003Cspan class=\"hljs-keyword\">const\u003C/span> [n, setN] = \u003Cspan class=\"hljs-title function_\">useState\u003C/span>(\u003Cspan class=\"hljs-number\">1\u003C/span>);\n  \u003Cspan class=\"hljs-title function_\">useEffect\u003C/span>(\u003Cspan class=\"hljs-function\">() =>\u003C/span> {\n    \u003Cspan class=\"hljs-built_in\">setInterval\u003C/span>(\u003Cspan class=\"hljs-function\">() =>\u003C/span> \u003Cspan class=\"hljs-title function_\">setN\u003C/span>(\u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">n\u003C/span>) =>\u003C/span> n + \u003Cspan class=\"hljs-number\">1\u003C/span>), \u003Cspan class=\"hljs-number\">1000\u003C/span>);\n  }, []);\n  \u003Cspan class=\"hljs-title function_\">useEffect\u003C/span>(\u003Cspan class=\"hljs-function\">() =>\u003C/span> {\n    \u003Cspan class=\"hljs-title function_\">onChange\u003C/span>(n);\n  }, [onChange, n]);\n  \u003Cspan class=\"hljs-keyword\">return\u003C/span> \u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">div\u003C/span>>\u003C/span>Child = {n}\u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">div\u003C/span>>\u003C/span>\u003C/span>;\n};\n\u003C/code>\u003C/pre>\n\u003Cp>\u003Ccode>Parent.jsx\u003C/code>:\u003C/p>\n\u003Cpre>\u003Ccode class=\"hljs language-js\">\u003Cspan class=\"hljs-keyword\">import\u003C/span> \u003Cspan class=\"hljs-title class_\">React\u003C/span>, { useState } \u003Cspan class=\"hljs-keyword\">from\u003C/span> \u003Cspan class=\"hljs-string\">\"react\"\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">import\u003C/span> { \u003Cspan class=\"hljs-title class_\">Child\u003C/span> } \u003Cspan class=\"hljs-keyword\">from\u003C/span> \u003Cspan class=\"hljs-string\">\"./Child\"\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">export\u003C/span> \u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title function_\">Parent\u003C/span> = (\u003Cspan class=\"hljs-params\">\u003C/span>) => {\n  \u003Cspan class=\"hljs-keyword\">const\u003C/span> [n, setN] = \u003Cspan class=\"hljs-title function_\">useState\u003C/span>();\n  \u003Cspan class=\"hljs-keyword\">return\u003C/span> (\n    \u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;>\u003C/span>\n      \u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">Child\u003C/span> \u003Cspan class=\"hljs-attr\">onChange\u003C/span>=\u003Cspan class=\"hljs-string\">{setN}\u003C/span> />\u003C/span>\n\n      \u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">div\u003C/span>>\u003C/span>Parent = {n}\u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">div\u003C/span>>\u003C/span>\n    \u003Cspan class=\"hljs-tag\">&#x3C;/>\u003C/span>\u003C/span>\n  );\n};\n\u003C/code>\u003C/pre>\n\u003Cp>You can see that it's a lot more effort to do the same thing in React. It's more verbose and less intuitive (dealing with the useState and useEffect hooks while also having to pay attention to not accidentally use a stale reference of \u003Ccode>n\u003C/code> like \u003Ccode>setN(n + 1)\u003C/code>, and it would be much more verbose if types were involved), while Svelte is all just vanilla JS/HTML except for the \u003Ccode>bind\u003C/code>.\u003C/p>\n\u003Ch3 id=\"animations\">\u003Ca href=\"#animations\">\u003C/a>Animations\u003C/h3>\n\u003Cp>Animating a DOM node when it is removed was important for my Wordle clone, but this is \u003Cem>extremely\u003C/em> tedious in React. Svelte has many built-in animations but I'll create a custom animation to even the playing field for React which does not have them built-in. The code below fades some text in and out each second, removing the elements from the DOM after they've faded out.\u003C/p>\n\u003Cp>\u003Ccode>Animations.svelte\u003C/code>: \u003Ca href=\"https://svelte.dev/repl/9fc72cc1eba04eb192df4f65c6a9f0a7?version=3.46.4\">Svelte playground\u003C/a>\u003C/p>\n\u003Cpre>\u003Ccode class=\"hljs language-svelte\">\u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">script\u003C/span>>\u003C/span>\u003C/span>\u003Cspan class=\"javascript\">\n  \u003Cspan class=\"hljs-keyword\">let\u003C/span> show = \u003Cspan class=\"hljs-literal\">true\u003C/span>;\n  \u003Cspan class=\"hljs-built_in\">setInterval\u003C/span>(\u003Cspan class=\"hljs-function\">() =>\u003C/span> (show = !show), \u003Cspan class=\"hljs-number\">1000\u003C/span>);\n  \u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title function_\">fade\u003C/span> = (\u003Cspan class=\"hljs-params\">\u003C/span>) => ({ \u003Cspan class=\"hljs-attr\">duration\u003C/span>: \u003Cspan class=\"hljs-number\">500\u003C/span>, \u003Cspan class=\"hljs-attr\">css\u003C/span>: \u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">t\u003C/span>) =>\u003C/span> \u003Cspan class=\"hljs-string\">`opacity: \u003Cspan class=\"hljs-subst\">${t}\u003C/span>;`\u003C/span> });\u003C/span>\u003Cspan class=\"xml\">\n\u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">script\u003C/span>>\u003C/span>\n\n\u003C/span>\u003Cspan class=\"javascript\">{\u003C/span>\u003Cspan class=\"hljs-keyword\">#if\u003C/span>\u003Cspan class=\"javascript\"> show}\u003C/span>\u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">span\u003C/span> \u003Cspan class=\"hljs-attr\">transition:fade\u003C/span>>\u003C/span>Hello, world!\u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">span\u003C/span>>\u003C/span>\u003C/span>\u003Cspan class=\"javascript\">{\u003C/span>\u003Cspan class=\"hljs-keyword\">/if\u003C/span>\u003Cspan class=\"javascript\">}\u003C/span>\u003Cspan class=\"xml\">\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Ccode>Animations.jsx\u003C/code>: \u003Ca href=\"https://codesandbox.io/s/animations-18srn2?file=/src/Animations.jsx\">CodeSandbox\u003C/a>\u003C/p>\n\u003Cpre>\u003Ccode class=\"hljs language-js\">\u003Cspan class=\"hljs-keyword\">import\u003C/span> \u003Cspan class=\"hljs-title class_\">React\u003C/span>, { useCallback, useEffect, useState } \u003Cspan class=\"hljs-keyword\">from\u003C/span> \u003Cspan class=\"hljs-string\">\"react\"\u003C/span>;\n\u003Cspan class=\"hljs-keyword\">export\u003C/span> \u003Cspan class=\"hljs-keyword\">const\u003C/span> \u003Cspan class=\"hljs-title function_\">Animations\u003C/span> = (\u003Cspan class=\"hljs-params\">\u003C/span>) => {\n  \u003Cspan class=\"hljs-keyword\">const\u003C/span> [show, setShow] = \u003Cspan class=\"hljs-title function_\">useState\u003C/span>(\u003Cspan class=\"hljs-literal\">true\u003C/span>);\n  \u003Cspan class=\"hljs-title function_\">useEffect\u003C/span>(\u003Cspan class=\"hljs-function\">() =>\u003C/span> {\n    \u003Cspan class=\"hljs-built_in\">setInterval\u003C/span>(\u003Cspan class=\"hljs-function\">() =>\u003C/span> \u003Cspan class=\"hljs-title function_\">setShow\u003C/span>(\u003Cspan class=\"hljs-function\">(\u003Cspan class=\"hljs-params\">show\u003C/span>) =>\u003C/span> !show), \u003Cspan class=\"hljs-number\">1000\u003C/span>);\n  }, []);\n  \u003Cspan class=\"hljs-keyword\">const\u003C/span> [isAttached, setAttached] = \u003Cspan class=\"hljs-title function_\">useState\u003C/span>(\u003Cspan class=\"hljs-literal\">true\u003C/span>);\n  \u003Cspan class=\"hljs-keyword\">const\u003C/span> [isFadeInStarted, setFadeInStarted] = \u003Cspan class=\"hljs-title function_\">useState\u003C/span>(\u003Cspan class=\"hljs-literal\">true\u003C/span>);\n  \u003Cspan class=\"hljs-title function_\">useEffect\u003C/span>(\u003Cspan class=\"hljs-function\">() =>\u003C/span> {\n    \u003Cspan class=\"hljs-keyword\">if\u003C/span> (show) {\n      \u003Cspan class=\"hljs-title function_\">setAttached\u003C/span>(\u003Cspan class=\"hljs-literal\">true\u003C/span>);\n      \u003Cspan class=\"hljs-title function_\">setImmediate\u003C/span>(\u003Cspan class=\"hljs-function\">() =>\u003C/span> \u003Cspan class=\"hljs-title function_\">setFadeInStarted\u003C/span>(\u003Cspan class=\"hljs-literal\">true\u003C/span>));\n    }\n  }, [show, isFadeInStarted]);\n  \u003Cspan class=\"hljs-keyword\">const\u003C/span> onTransitionEnd = \u003Cspan class=\"hljs-title function_\">useCallback\u003C/span>(\u003Cspan class=\"hljs-function\">() =>\u003C/span> {\n    \u003Cspan class=\"hljs-keyword\">if\u003C/span> (!show) {\n      \u003Cspan class=\"hljs-title function_\">setAttached\u003C/span>(\u003Cspan class=\"hljs-literal\">false\u003C/span>);\n      \u003Cspan class=\"hljs-title function_\">setFadeInStarted\u003C/span>(\u003Cspan class=\"hljs-literal\">false\u003C/span>);\n    }\n  }, [show]);\n  \u003Cspan class=\"hljs-keyword\">return\u003C/span> isAttached ? (\n    \u003Cspan class=\"xml\">\u003Cspan class=\"hljs-tag\">&#x3C;\u003Cspan class=\"hljs-name\">span\u003C/span>\n      \u003Cspan class=\"hljs-attr\">style\u003C/span>=\u003Cspan class=\"hljs-string\">{{\u003C/span>\n        \u003Cspan class=\"hljs-attr\">transition:\u003C/span> \"\u003Cspan class=\"hljs-attr\">opacity\u003C/span> \u003Cspan class=\"hljs-attr\">linear\u003C/span> \u003Cspan class=\"hljs-attr\">500ms\u003C/span>\",\n        \u003Cspan class=\"hljs-attr\">opacity:\u003C/span> \u003Cspan class=\"hljs-attr\">show\u003C/span> &#x26;&#x26; \u003Cspan class=\"hljs-attr\">isFadeInStarted\u003C/span> ? \u003Cspan class=\"hljs-attr\">1\u003C/span> \u003Cspan class=\"hljs-attr\">:\u003C/span> \u003Cspan class=\"hljs-attr\">0\u003C/span>,\n      }}\n      \u003Cspan class=\"hljs-attr\">onTransitionEnd\u003C/span>=\u003Cspan class=\"hljs-string\">{onTransitionEnd}\u003C/span>\n    >\u003C/span>\n      Hello, world!\n    \u003Cspan class=\"hljs-tag\">&#x3C;/\u003Cspan class=\"hljs-name\">span\u003C/span>>\u003C/span>\u003C/span>\n  ) : \u003Cspan class=\"hljs-literal\">null\u003C/span>;\n};\n\u003C/code>\u003C/pre>\n\u003Cp>Handling these sorts of transitions is honestly a nightmare in React. Instead of simply not rendering a child anymore like you'd normally do, you need to set up this monstrosity to transition in/out and only stop rendering the child once its animation has finished. No library can abstract this away fully either, because no matter what you do, removing the child from the virtual DOM will instantly remove it from the real DOM and cut off its transition.\u003C/p>\n\u003Ch3 id=\"performance\">\u003Ca href=\"#performance\">\u003C/a>Performance\u003C/h3>\n\u003Cp>There's another benefit of Svelte shown in the example above as well. Notice how I used \u003Ccode>useCallback()\u003C/code> in the React example? That's not strictly necessary ‚Äì the program will work without it ‚Äì but it helps performance. Another thing I'd do if this were production code is extract the styles into global constants to avoid creating an object every time it renders, but these arcane tricks are not required in Svelte. Declaring callbacks inline inside props is perfectly fine and will only produce a single function during runtime, rather than creating a new one on every render like React.\u003C/p>\n\u003Ch2 id=\"wordle\">\u003Ca href=\"#wordle\">\u003C/a>Wordle\u003C/h2>\n\u003Cp>Those React-Svelte comparisons above came directly from my Wordle project.\u003C/p>\n\u003Cp>For passing data to a parent, I had an \u003Ccode>&#x3C;App>\u003C/code> component which rendered the menu/status bar UI for choosing game options which would be passed as props to the \u003Ccode>&#x3C;Game>\u003C/code> component. However the \u003Ccode>&#x3C;Game>\u003C/code> handled the score, but I wanted it displayed in the status bar, which meant I needed to send it up from \u003Ccode>&#x3C;Game>\u003C/code> to the \u003Ccode>&#x3C;App>\u003C/code>.\u003C/p>\n\u003Cp>For transitions, I really wanted the game to \u003Cem>feel\u003C/em> good to play and be satisfying to guess a word right. That meant I needed a fancy transition for when a word disappeared from the screen. I actually never ended up implementing this in the React version because of what a hassle I knew it would be, and this is what prompted me to try out Svelte instead! Boy am I glad I did.\u003C/p>\n\u003Cp>Finally for performance I did things the \"right\" way in React using \u003Ccode>useCallback()\u003C/code> and such, but when I submitted guesses with hundreds of Wordle games on the screen at once it would noticeably freeze for about half a second. There's probably ways to optimise it further but none were immediately obvious to me. However when building the same thing in Svelte, the game shows no lag for the same case. And remember before this started I had a lot of experience in React but \u003Cstrong>zero\u003C/strong> in Svelte, so that's really saying something about how easy it is to build performant apps in Svelte.\u003C/p>\n\u003Cp>Right now the game is near-finished with polish like animations, autosaves, seeded games to play with friends, etc. but even with this complexity it was still only ~800 lines of code, which says something about how little code you need to write to do things. I reckon the same thing in React would easily be 2k lines or more.\u003C/p>\n\u003Ch2 id=\"conclusion\">\u003Ca href=\"#conclusion\">\u003C/a>Conclusion\u003C/h2>\n\u003Cp>I don't know if you can tell by now but I love Svelte. üòú After using it once it felt so good that I decided to write a blog post about how great it is, and I don't do this for every technology I try! I'm used to hacking things together in vanilla JS (occasionally I challenge myself to build a simple arcade game in an hour using vanilla JS). Using Svelte felt like this where everything was vanilla web dev and I was free to do things however I wanted, but with much more convenience. It opened my eyes to how much dread I felt in React realising I'd need to make a callback prop to use data outside a component or set up animation logic. But in Svelte I know these things can be as easy as a single line of code. üòå As far as I can tell, there are no major negative tradeoffs to using Svelte (other than a smaller community than React) so I think I'll be using it in a lot more personal projects in the future.\u003C/p>"}}</script></div>
  </body>
</html>
